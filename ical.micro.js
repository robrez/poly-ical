"object"==typeof module?ICAL=module.exports:"undefined"!=typeof window?"object"!=typeof ICAL&&(this.ICAL={}):ICAL={},ICAL.foldLength=75,ICAL.newLineChar="\r\n",ICAL.helpers={isStrictlyNaN:function(a){return"number"==typeof a&&isNaN(a)},strictParseInt:function(a){var b=parseInt(a,10);if(ICAL.helpers.isStrictlyNaN(b))throw new Error('Could not extract integer from "'+a+'"');return b},formatClassType:function(a,b){return"undefined"==typeof a?void 0:a instanceof b?a:new b(a)},unescapedIndexOf:function(a,b,c){for(;-1!==(c=a.indexOf(b,c));){if(!(c>0&&"\\"===a[c-1]))return c;c+=1}return-1},binsearchInsert:function(a,b,c){if(!a.length)return 0;for(var d,e,f=0,g=a.length-1;g>=f;)if(d=f+Math.floor((g-f)/2),e=c(b,a[d]),0>e)g=d-1;else{if(!(e>0))break;f=d+1}return 0>e?d:e>0?d+1:d},dumpn:function(){ICAL.debug&&("undefined"!=typeof console&&"log"in console?ICAL.helpers.dumpn=function(a){console.log(a)}:ICAL.helpers.dumpn=function(a){dump(a+"\n")},ICAL.helpers.dumpn(arguments[0]))},clone:function(a,b){if(a&&"object"==typeof a){if(a instanceof Date)return new Date(a.getTime());if("clone"in a)return a.clone();if(Array.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(b?ICAL.helpers.clone(a[d],!0):a[d]);return c}var e={};for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b?e[f]=ICAL.helpers.clone(a[f],!0):e[f]=a[f]);return e}return a},foldline:function(a){for(var b="",c=a||"";c.length;)b+=ICAL.newLineChar+" "+c.substr(0,ICAL.foldLength),c=c.substr(ICAL.foldLength);return b.substr(ICAL.newLineChar.length+1)},pad2:function(a){"string"!=typeof a&&("number"==typeof a&&(a=parseInt(a)),a=String(a));var b=a.length;switch(b){case 0:return"00";case 1:return"0"+a;default:return a}},trunc:function(a){return 0>a?Math.ceil(a):Math.floor(a)},inherits:function(a,b,c){function d(){}d.prototype=a.prototype,b.prototype=new d,c&&ICAL.helpers.extend(c,b.prototype)},extend:function(a,b){for(var c in a){var d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(b,c,d)}return b}},ICAL.design=function(){"use strict";function a(a){switch(a){case"\\\\":return"\\";case"\\;":return";";case"\\,":return",";case"\\n":case"\\N":return"\n";default:return a}}function b(b){return-1===b.indexOf("\\")?b:b.replace(c,a)}var c=/\\\\|\\;|\\,|\\[Nn]/g,d={defaultType:"text"},e={defaultType:"text",multiValue:","},f={defaultType:"text",structuredValue:";"},g={defaultType:"integer"},h={defaultType:"date-time",allowedTypes:["date-time","date"]},i={defaultType:"date-time"},j={defaultType:"uri"},k={defaultType:"utc-offset"},l={defaultType:"recur"},m={defaultType:"date-and-or-time",allowedTypes:["date-time","date","text"]},n={categories:e,url:j,version:d,uid:d},o={boolean:{values:["TRUE","FALSE"],fromICAL:function(a){switch(a){case"TRUE":return!0;case"FALSE":return!1;default:return!1}},toICAL:function(a){return a?"TRUE":"FALSE"}},float:{matches:/^[+-]?\d+\.\d+$/,fromICAL:function(a){var b=parseFloat(a);return ICAL.helpers.isStrictlyNaN(b)?0:b},toICAL:function(a){return String(a)}},integer:{fromICAL:function(a){var b=parseInt(a);return ICAL.helpers.isStrictlyNaN(b)?0:b},toICAL:function(a){return String(a)}},text:{matches:/.*/,fromICAL:function(a,c){return b(a)},toICAL:function(a,b){return a.replace(/\\|;|,|\n/g,function(a){switch(a){case"\\":return"\\\\";case";":return"\\;";case",":return"\\,";case"\n":return"\\n";default:return a}})}},uri:{},"utc-offset":{toICAL:function(a){return a.length<7?a.substr(0,3)+a.substr(4,2):a.substr(0,3)+a.substr(4,2)+a.substr(7,2)},fromICAL:function(a){return a.length<6?a.substr(0,3)+":"+a.substr(3,2):a.substr(0,3)+":"+a.substr(3,2)+":"+a.substr(5,2)},decorate:function(a){return ICAL.UtcOffset.fromString(a)},undecorate:function(a){return a.toString()}}},p={cutype:{values:["INDIVIDUAL","GROUP","RESOURCE","ROOM","UNKNOWN"],allowXName:!0,allowIanaToken:!0},"delegated-from":{valueType:"cal-address",multiValue:","},"delegated-to":{valueType:"cal-address",multiValue:","},encoding:{values:["8BIT","BASE64"]},fbtype:{values:["FREE","BUSY","BUSY-UNAVAILABLE","BUSY-TENTATIVE"],allowXName:!0,allowIanaToken:!0},member:{valueType:"cal-address",multiValue:","},partstat:{values:["NEEDS-ACTION","ACCEPTED","DECLINED","TENTATIVE","DELEGATED","COMPLETED","IN-PROCESS"],allowXName:!0,allowIanaToken:!0},range:{values:["THISLANDFUTURE"]},related:{values:["START","END"]},reltype:{values:["PARENT","CHILD","SIBLING"],allowXName:!0,allowIanaToken:!0},role:{values:["REQ-PARTICIPANT","CHAIR","OPT-PARTICIPANT","NON-PARTICIPANT"],allowXName:!0,allowIanaToken:!0},rsvp:{values:["TRUE","FALSE"]},"sent-by":{valueType:"cal-address"},tzid:{matches:/^\//},value:{values:["binary","boolean","cal-address","date","date-time","duration","float","integer","period","recur","text","time","uri","utc-offset"],allowXName:!0,allowIanaToken:!0}},q=ICAL.helpers.extend(o,{binary:{decorate:function(a){return ICAL.Binary.fromString(a)},undecorate:function(a){return a.toString()}},"cal-address":{},date:{decorate:function(a,b){return ICAL.Time.fromDateString(a,b)},undecorate:function(a){return a.toString()},fromICAL:function(a){var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2);return"Z"===a[8]&&(b+="Z"),b},toICAL:function(a){if(a.length>11)return a;var b=a.substr(0,4)+a.substr(5,2)+a.substr(8,2);return"Z"===a[10]&&(b+="Z"),b}},"date-time":{fromICAL:function(a){var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+"T"+a.substr(9,2)+":"+a.substr(11,2)+":"+a.substr(13,2);return"Z"===a[15]&&(b+="Z"),b},toICAL:function(a){if(a.length<19)return a;var b=a.substr(0,4)+a.substr(5,2)+a.substr(8,5)+a.substr(14,2)+a.substr(17,2);return"Z"===a[19]&&(b+="Z"),b},decorate:function(a,b){return ICAL.Time.fromDateTimeString(a,b)},undecorate:function(a){return a.toString()}},duration:{decorate:function(a){return ICAL.Duration.fromString(a)},undecorate:function(a){return a.toString()}},period:{fromICAL:function(a){var b=a.split("/");return b[0]=q["date-time"].fromICAL(b[0]),ICAL.Duration.isValueString(b[1])||(b[1]=q["date-time"].fromICAL(b[1])),b},toICAL:function(a){return a[0]=q["date-time"].toICAL(a[0]),ICAL.Duration.isValueString(a[1])||(a[1]=q["date-time"].toICAL(a[1])),a.join("/")},decorate:function(a,b){return ICAL.Period.fromJSON(a,b)},undecorate:function(a){return a.toJSON()}},recur:{fromICAL:function(a){return ICAL.Recur._stringToData(a,!0)},toICAL:function(a){var b="";for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=a[c];"until"==c?d=d.length>10?q["date-time"].toICAL(d):q.date.toICAL(d):"wkst"==c?d=ICAL.Recur.numericDayToIcalDay(d):Array.isArray(d)&&(d=d.join(",")),b+=c.toUpperCase()+"="+d+";"}return b.substr(0,b.length-1)},decorate:function(a){return ICAL.Recur.fromData(a)},undecorate:function(a){return a.toJSON()}},time:{fromICAL:function(a){if(a.length<6)return a;var b=a.substr(0,2)+":"+a.substr(2,2)+":"+a.substr(4,2);return"Z"===a[6]&&(b+="Z"),b},toICAL:function(a){if(a.length<8)return a;var b=a.substr(0,2)+a.substr(3,2)+a.substr(6,2);return"Z"===a[8]&&(b+="Z"),b}}}),r=ICAL.helpers.extend(n,{action:d,attach:{defaultType:"uri"},attendee:{defaultType:"cal-address"},calscale:d,class:d,comment:d,completed:i,contact:d,created:i,description:d,dtend:h,dtstamp:i,dtstart:h,due:h,duration:{defaultType:"duration"},exdate:{defaultType:"date-time",allowedTypes:["date-time","date"],multiValue:","},exrule:l,freebusy:{defaultType:"period",multiValue:","},geo:{defaultType:"float",structuredValue:";"},"last-modified":i,location:d,method:d,organizer:{defaultType:"cal-address"},"percent-complete":g,priority:g,prodid:d,"related-to":d,repeat:g,rdate:{defaultType:"date-time",allowedTypes:["date-time","date","period"],multiValue:",",detectType:function(a){return-1!==a.indexOf("/")?"period":-1===a.indexOf("T")?"date":"date-time"}},"recurrence-id":h,resources:e,"request-status":f,rrule:l,sequence:g,status:d,summary:d,transp:d,trigger:{defaultType:"duration",allowedTypes:["duration","date-time"]},tzoffsetfrom:k,tzoffsetto:k,tzurl:j,tzid:d,tzname:d}),s=ICAL.helpers.extend(o,{date:{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,"date")},undecorate:function(a){return a.toString()},fromICAL:function(a){return 8==a.length?q.date.fromICAL(a):"-"==a[0]&&6==a.length?a.substr(0,4)+"-"+a.substr(4):a},toICAL:function(a){return 10==a.length?q.date.toICAL(a):"-"==a[0]&&7==a.length?a.substr(0,4)+a.substr(5):a}},time:{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString("T"+a,"time")},undecorate:function(a){return a.toString()},fromICAL:function(a){var b=s.time._splitZone(a,!0),c=b[0],d=b[1];return 6==d.length?d=d.substr(0,2)+":"+d.substr(2,2)+":"+d.substr(4,2):4==d.length&&"-"!=d[0]?d=d.substr(0,2)+":"+d.substr(2,2):5==d.length&&(d=d.substr(0,3)+":"+d.substr(3,2)),5!=c.length||"-"!=c[0]&&"+"!=c[0]||(c=c.substr(0,3)+":"+c.substr(3)),d+c},toICAL:function(a){var b=s.time._splitZone(a),c=b[0],d=b[1];return 8==d.length?d=d.substr(0,2)+d.substr(3,2)+d.substr(6,2):5==d.length&&"-"!=d[0]?d=d.substr(0,2)+d.substr(3,2):6==d.length&&(d=d.substr(0,3)+d.substr(4,2)),6!=c.length||"-"!=c[0]&&"+"!=c[0]||(c=c.substr(0,3)+c.substr(4)),d+c},_splitZone:function(a,b){var c,d,e=a.length-1,f=a.length-(b?5:6),g=a[f];return"Z"==a[e]?(c=a[e],d=a.substr(0,e)):a.length>6&&("-"==g||"+"==g)?(c=a.substr(f),d=a.substr(0,f)):(c="",d=a),[c,d]}},"date-time":{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,"date-time")},undecorate:function(a){return a.toString()},fromICAL:function(a){return s["date-and-or-time"].fromICAL(a)},toICAL:function(a){return s["date-and-or-time"].toICAL(a)}},"date-and-or-time":{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,"date-and-or-time")},undecorate:function(a){return a.toString()},fromICAL:function(a){var b=a.split("T");return(b[0]?s.date.fromICAL(b[0]):"")+(b[1]?"T"+s.time.fromICAL(b[1]):"")},toICAL:function(a){var b=a.split("T");return s.date.toICAL(b[0])+(b[1]?"T"+s.time.toICAL(b[1]):"")}},timestamp:q["date-time"],"language-tag":{matches:/^[a-zA-Z0-9\-]+$/}}),t={type:{valueType:"text",multiValue:","},value:{values:["text","uri","date","time","date-time","date-and-or-time","timestamp","boolean","integer","float","utc-offset","language-tag"],allowXName:!0,allowIanaToken:!0}},u=ICAL.helpers.extend(n,{adr:f,anniversary:m,bday:m,caladruri:j,caluri:j,clientpidmap:f,email:d,fburl:j,fn:d,gender:f,geo:j,impp:j,key:j,kind:d,lang:{defaultType:"language-tag"},logo:j,member:j,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:e,note:d,org:f,photo:j,related:j,rev:{defaultType:"timestamp"},role:d,sound:j,source:j,tel:{defaultType:"uri",allowedTypes:["uri","text"]},title:d,tz:{defaultType:"text",allowedTypes:["text","utc-offset","uri"]},xml:d}),v={value:q,param:p,property:r},w={value:s,param:t,property:u},x={defaultSet:v,defaultType:"unknown",components:{vcard:w,vevent:v,vtodo:v,vjournal:v,valarm:v,vtimezone:v,daylight:v,standard:v},icalendar:v,vcard:w,getDesignSet:function(a){var b=a&&a in x.components;return b?x.components[a]:x.defaultSet}};return x}(),ICAL.parse=function(){"use strict";function a(a){this.message=a,this.name="ParserError";try{throw new Error}catch(a){if(a.stack){var b=a.stack.split("\n");b.shift(),this.stack=b.join("\n")}}}function b(c){var d={},e=d.component=[];if(d.stack=[e],b._eachLine(c,function(a,c){b._handleContentLine(c,d)}),d.stack.length>1)throw new a("invalid ical body. component began but did not end");return d=null,1==e.length?e[0]:e}var c=/[^ \t]/,d=":",e=";",f="=",g="unknown",h="text",i=ICAL.design,j=ICAL.helpers;a.prototype=Error.prototype,b.property=function(a,c){var d={component:[[],[]],designSet:c||i.defaultSet};return b._handleContentLine(a,d),d.component[1][0]},b.component=function(a){return b(a)},b.ParserError=a,b._handleContentLine=function(c,f){var h,j,k,l,m=c.indexOf(d),n=c.indexOf(e),o={};-1!==n&&-1!==m&&n>m&&(n=-1);var p;if(-1!==n){if(k=c.substring(0,n).toLowerCase(),p=b._parseParameters(c.substring(n),0,f.designSet),-1==p[2])throw new a("Invalid parameters in '"+c+"'");if(o=p[0],h=p[1].length+p[2]+n,-1===(j=c.substring(h).indexOf(d)))throw new a("Missing parameter value in '"+c+"'");l=c.substring(h+j+1)}else{if(-1===m)throw new a('invalid line (no token ";" or ":") "'+c+'"');if(k=c.substring(0,m).toLowerCase(),l=c.substring(m+1),"begin"===k){var q=[l.toLowerCase(),[],[]];return 1===f.stack.length?f.component.push(q):f.component[2].push(q),f.stack.push(f.component),f.component=q,void(f.designSet||(f.designSet=i.getDesignSet(f.component[0])))}if("end"===k)return void(f.component=f.stack.pop())}var r,s,t=!1,u=!1;k in f.designSet.property&&(s=f.designSet.property[k],"multiValue"in s&&(t=s.multiValue),"structuredValue"in s&&(u=s.structuredValue),l&&"detectType"in s&&(r=s.detectType(l))),r||(r="value"in o?o.value.toLowerCase():s?s.defaultType:g),delete o.value;var v;t&&u?(l=b._parseMultiValue(l,u,r,[],t,f.designSet),v=[k,o,r,l]):t?(v=[k,o,r],b._parseMultiValue(l,t,r,v,null,f.designSet)):u?(l=b._parseMultiValue(l,u,r,[],null,f.designSet),v=[k,o,r,l]):(l=b._parseValue(l,r,f.designSet),v=[k,o,r,l]),f.component[1].push(v)},b._parseValue=function(a,b,c){return b in c.value&&"fromICAL"in c.value[b]?c.value[b].fromICAL(a):a},b._parseParameters=function(c,g,i){for(var k,l,m,n,o,p=g,q=0,r=f,s={},t=-1;q!==!1&&-1!==(q=j.unescapedIndexOf(c,r,q+1));){if(k=c.substr(p+1,q-p-1),0==k.length)throw new a("Empty parameter name in '"+c+"'");l=k.toLowerCase();var u=c[q+1];if('"'===u){if(t=q+2,q=j.unescapedIndexOf(c,'"',t),-1===q)throw new a('invalid line (no matching double quote) "'+c+'"');m=c.substr(t,q-t),p=j.unescapedIndexOf(c,e,q),-1===p&&(q=!1)}else{t=q+1;var v=j.unescapedIndexOf(c,e,t),w=j.unescapedIndexOf(c,d,t);-1!==w&&v>w?(v=w,q=!1):-1===v?(v=-1===w?c.length:w,q=!1):p=v,m=c.substr(t,v-t)}n=l in i.param&&i.param[l].valueType?i.param[l].valueType:h,l in i.param&&(o=i.param[l].multiValue),m=b._rfc6868Escape(m),o?s[l]=b._parseMultiValue(m,o,n,[],null,i):s[l]=b._parseValue(m,n,i)}return[s,m,t]},b._rfc6868Escape=function(a){return a.replace(/\^['n^]/g,function(a){return k[a]})};var k={"^'":'"',"^n":"\n","^^":"^"};return b._parseMultiValue=function(a,c,d,e,f,g){for(var h,i=0,k=0;-1!==(i=j.unescapedIndexOf(a,c,k));)h=a.substr(k,i-k),h=f?b._parseMultiValue(h,f,d,[],null,g):b._parseValue(h,d,g),e.push(h),k=i+1;return h=a.substr(k),h=f?b._parseMultiValue(h,f,d,[],null,g):b._parseValue(h,d,g),e.push(h),1==e.length?e[0]:e},b._eachLine=function(a,b){var d,e,f,g=a.length,h=a.search(c),i=h;do i=a.indexOf("\n",h)+1,f="\r"===a[i-2]?2:1,0===i&&(i=g,f=0),e=a[h]," "===e||"	"===e?d+=a.substr(h+1,i-h-(f+1)):(d&&b(null,d),d=a.substr(h,i-h-f)),h=i;while(i!==g);d=d.trim(),d.length&&b(null,d)},b}();
//# sourceMappingURL=ical.min.js.map